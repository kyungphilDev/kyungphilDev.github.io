I"µ<h2 id="pipleline-cpu-ê°œë…-ì •ë¦¬">Pipleline CPU ê°œë… ì •ë¦¬</h2>

<hr />

<p>Pipeline CPUë¥¼ design &amp; implement í•˜ê¸° ì „ì—, Pipeline CPUì˜ êµ¬ì¡°ë¥¼ ë¨¼ì € ì¶©ë¶„íˆ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.<br />
Pipeline CPUëŠ” ì´ì „ì— ë°°ì› ë˜ Single-cycle CPU, Multi-cycle CPU ì— ë¹„í•´ì„œ ê°™ì€ cycle ì‹œê°„ ë™ì•ˆ ë” ë§ì€ instructionì„ ìˆ˜í–‰í•  ìˆ˜ ìˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì–´ë– í•œ íŠ¹ì„±ë“¤ ë•Œë¬¸ì— ì´ëŸ¬í•œ íš¨ìœ¨ì´ ê°€ëŠ¥í•œ ê²ƒì¼ê¹Œìš”?<br />
ê·¸ë¦¬ê³  êµ¬í˜„ ìƒì— ì–´ë– í•œ ì ì„ ì£¼ì˜í•´ì•¼ í• ê¹Œìš”?</p>

<h3 id="ì„¸ê°€ì§€-ì£¼ìš”-ì‚¬í•­">ì„¸ê°€ì§€ ì£¼ìš” ì‚¬í•­</h3>

<ol>
  <li>Data Hazard</li>
  <li>Control Hazard</li>
  <li>Branch Prediction</li>
</ol>

<hr />

<p>RAW Hazard ì¡°ê±´</p>

<ul>
  <li>I(young) =&gt; R/I, LD, SD, Bxx, JALR // Read Instruction</li>
  <li>I(old) =&gt; R/I, LD, JAL, JALR // Write</li>
  <li>dis(I OLD, I YOUNG) &lt;= dis(ID, WB) = 3 // dist ê°€ 3 ì´ìƒì¸ ê²½ìš°ëŠ” hazardê°€ ë°œìƒí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ
write(old instructiion) ë³´ë‹¤ read(young instruction)ì´ ë¨¼ì € ìˆ˜í–‰ë ê²½ìš° hazardê°€ ë°œìƒí•œë‹¤.</li>
</ul>
<p align="center">
  <img src="https://user-images.githubusercontent.com/80669616/116329894-40c7b780-a807-11eb-8e9e-7580d0685266.png" width="400" /><br />Feature1. Responsive Web Page
</p>

<h3 id="data-forwarding-logic">data forwarding logic</h3>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="p">(</span><span class="n">rs1_EX</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">rs1_EX</span> <span class="o">==</span> <span class="n">rd_MEM</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">RegWrite_MEM</span> <span class="n">then</span>
<span class="n">forward</span> <span class="n">operand</span> <span class="n">from</span> <span class="n">MEM</span> <span class="n">stage</span> <span class="c1">// dist=1</span>
<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">rs_EX</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">rs_EX</span> <span class="o">==</span> <span class="n">rd_WB</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">RegWrite_WB</span> <span class="n">then</span>
<span class="n">forward</span> <span class="n">operand</span> <span class="n">from</span> <span class="n">WB</span> <span class="n">stage</span> <span class="c1">// dist=2</span>
<span class="k">else</span>
<span class="n">use</span> <span class="n">the</span> <span class="n">operand</span> <span class="n">from</span> <span class="k">register</span> <span class="n">file</span> <span class="c1">//dist=3</span>
</code></pre></div></div>

<p>ë§ˆì°¬ê°€ì§€ë¡œ rs2ì—ë„ forwarding logicì„ ìˆ˜í–‰í•˜ë©´ ëœë‹¤.
â€œìœ„ì˜ ì¡°ê±´ë¬¸ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´ distê°€ ì ì€ 1,2,3 ì´ ìˆœì„œëŒ€ë¡œ forwardingì„ ìˆ˜í–‰í•´ì£¼ì–´ì•¼í•œë‹¤. ë‹¤ìŒì˜ ì˜ˆì‹œì˜ ê²½ìš°ë¥¼ í•œ ë²ˆ ì‚´í´ë³´ìâ€</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sub</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x3</span>
<span class="n">add</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x5</span> <span class="c1">// 1, 2ë²ˆì§¸ì™€ RAW(x2)</span>
<span class="n">add</span> <span class="n">x4</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x7</span> <span class="c1">// 2, 3ë²ˆì§¸ì™€ RAW(x2)</span>
</code></pre></div></div>

<p>ìœ„ì˜ ì˜ˆì‹œì™€ ê°™ì€ ê²½ìš°ì— ë§Œì•½ 3ë²ˆì§¸ ì¤„ì„ ìˆ˜í–‰í•  ë•Œ,<br />
Data forwardingì„ dist 2, dist 1ì¸ ìˆœì„œëŒ€ë¡œ ë¨¼ì € ìˆ˜í–‰í•˜ê²Œ ëœë‹¤ë©´, 3ë²ˆì§¸ ì¤„ì—ê²Œ ê°€ì¥ ìµœê·¼ì¸ addë¥¼ í•œ ê²°ê³¼ë¥¼ x2ê°€ ë°›ì•„ì™€ì•¼í•˜ì§€ë§Œ addë¥¼ ìˆ˜í–‰í•˜ê¸° ì „ì¸ subì˜ ê²°ê³¼, x2ë¥¼ ë¨¼ì € ì½ì–´ì™€ì„œ data forwardingì„ ìˆ˜í–‰í•œë‹¤ë©´ ì˜¬ë°”ë¥¸ ê²°ê³¼ê°’ì„ ê°–ì§€ ëª»í•˜ê²Œ ëœë‹¤!</p>
:ET